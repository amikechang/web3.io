<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEB3 Portal - Defi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* 复用基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #0a0a0f;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('../images/background.png');
            background-size: cover;
            background-position: center;
            filter: blur(8px);
            opacity: 0.3;
            z-index: -1;
        }

        /* Defi 页面特定样式 */
        .defi-container {
            max-width: 1200px;
            margin: 100px auto 120px;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 40px;
            animation: fadeIn 0.8s ease;
        }

        .defi-card {
            background: rgba(20, 20, 30, 0.8);
            backdrop-filter: blur(25px);
            border-radius: 25px;
            padding: 35px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
        }

        .defi-card:hover {
            transform: translateY(-8px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        }

        .defi-card h2 {
            font-size: 28px;
            margin-bottom: 25px;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .defi-card h2 i {
            font-size: 24px;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .defi-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 25px 0;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-3px);
        }

        .stat-item .value {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .stat-item .label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 0.5px;
        }

        .defi-form {
            margin-top: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 15px;
            letter-spacing: 0.5px;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .defi-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .defi-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 0, 255, 0.3);
        }

        /* 添加页面动画 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 响应式优化 */
        @media (max-width: 768px) {
            .defi-container {
                grid-template-columns: 1fr;
                gap: 30px;
                margin: 80px auto 120px;
            }
        }

        /* 复用导航栏样式 */
        nav {
            position: fixed;
            bottom: 20px;
            left: 40%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 40px;
            background: rgba(20, 20, 30, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 100px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            z-index: 1000;
        }

        /* 修改LOGO样式，与主页面保持一致 */
        .site-logo {
            position: fixed;
            top: 30px;
            left: 30px;
            width: 60px;  /* 恢复原始宽度 */
            height: 60px; /* 恢复原始高度 */
            z-index: 1000;
            transition: all 0.3s ease;
            padding: 10px;  /* 恢复原始内边距 */
            background: rgba(20, 20, 30, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 15px; /* 恢复原始圆角 */
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .site-logo:hover {
            transform: scale(1.05);
            background: rgba(20, 20, 30, 0.8);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .site-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
        }

        /* 复制主页面的导航栏样式 */
        .nav-links {
            display: flex;
            gap: 15px;
        }

        .nav-links a {
            color: #ffffff;
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 12px;
            width: 50px;
            height: 50px;
            border-radius: 50px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .nav-links a span {
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            opacity: 0;
            visibility: hidden;
            background: rgba(20, 20, 30, 0.9);
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 14px;
            white-space: nowrap;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-links a span::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid rgba(20, 20, 30, 0.9);
        }

        .nav-links a:hover span {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .nav-links a i {
            font-size: 20px;
            margin: 0;
        }

        /* 复制下拉菜单样式 */
        .language-dropdown,
        .contact-dropdown {
            position: relative;
        }

        .social-links,
        .language-options {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: rgba(20, 20, 30, 0.9);
            backdrop-filter: blur(20px);
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 10px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            min-width: 120px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .language-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            min-width: 200px;
        }

        .contact-dropdown.active .social-links,
        .language-dropdown.active .language-options {
            opacity: 1;
            visibility: visible;
        }

        /* 特殊处理下拉菜单中的链接 */
        .social-links a,
        .language-options a {
            width: auto;
            height: auto;
            padding: 10px 20px;
            justify-content: center;
        }

        .language-options a.active {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
        }

        /* 添加导航栏的渐变和悬浮效果 */
        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
            border-radius: 50px;
        }

        .nav-links a:hover::before {
            opacity: 1;
        }

        .nav-links a.active {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            color: #ffffff;
            font-weight: 600;
        }

        /* 添加导航栏动画 */
        @keyframes navFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        nav {
            animation: navFadeIn 0.5s ease forwards;
        }

        /* 社交媒体特殊悬浮效果 */
        .nav-links a[href*="twitter"]:hover::before {
            background: linear-gradient(45deg, #1DA1F2, #14171A);
            opacity: 1;
        }

        .nav-links a[href*="telegram"]:hover::before {
            background: linear-gradient(45deg, #0088cc, #0077B5);
            opacity: 1;
        }

        /* 修改语言选项的样式 */
        .language-options a span,
        .social-links a span {
            position: static !important; /* 覆盖之前的定位 */
            opacity: 1 !important; /* 确保文字可见 */
            visibility: visible !important;
            transform: none !important;
            background: none;
            padding: 0;
            box-shadow: none;
            border: none;
            white-space: nowrap;
        }

        .language-options a,
        .social-links a {
            width: auto !important;
            height: auto !important;
            padding: 10px 20px !important;
            display: flex !important;
            align-items: center;
            gap: 8px;
        }

        /* 修复下拉菜单中图标和文字的对齐 */
        .language-options a i,
        .social-links a i {
            margin: 0;
            font-size: 16px;
        }

        /* 修复下拉菜单的显示 */
        .language-dropdown.active .language-options,
        .contact-dropdown.active .social-links {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        /* 移除下拉菜单选项的悬浮文字效果 */
        .language-options a:hover span,
        .social-links a:hover span {
            transform: none !important;
        }

        /* 确保下拉菜单选项的背景效果正常 */
        .language-options a:hover,
        .social-links a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* 添加奖励信息样式 */
        .rewards-info {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .rewards-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .rewards-row:last-child {
            border-bottom: none;
        }

        .rewards-label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.7);
        }

        .rewards-label i {
            font-size: 14px;
            color: #ff00ff;
        }

        .rewards-value {
            font-weight: 500;
            font-size: 16px;
        }

        .rewards-value.highlight {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 600;
        }

        /* 操作按钮组样式 */
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .defi-button.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .defi-button.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .defi-button.primary {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
        }

        .defi-button i {
            margin-right: 8px;
        }

        /* 添加动画效果 */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .rewards-value.highlight {
            animation: pulse 2s infinite;
        }

        /* 质押期限选项样式 */
        .stake-period-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 5px;
        }

        .period-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .period-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .period-option.active {
            background: rgba(255, 0, 255, 0.15);
            border-color: #ff00ff;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.2);
        }

        .period-option .days {
            font-size: 15px;
            font-weight: 500;
        }

        .period-option .apy {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* 添加MAX按钮样式 */
        .input-with-max {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-with-max input {
            padding-right: 80px; /* 为MAX按钮留出空间 */
        }

        .max-button {
            position: absolute;
            right: 8px;
            padding: 6px 12px;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .max-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 10px rgba(255, 0, 255, 0.3);
        }

        .max-button:active {
            transform: translateY(0);
        }

        /* 移除输入框的上下箭头 */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            -webkit-appearance: none;
            -moz-appearance: textfield;
            appearance: none;
        }

        /* 优化输入框样式 */
        .form-group input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
        }

        /* 添加错误提示框样式 */
        .alert-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .alert {
            background: rgba(20, 20, 30, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 0, 255, 0.2);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.4);
            color: #ffffff;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(120%);
            transition: transform 0.3s ease;
            min-width: 300px;
        }

        .alert.show {
            transform: translateX(0);
        }

        .alert i {
            font-size: 20px;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .alert .message {
            flex-grow: 1;
        }

        .alert .close-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            font-size: 18px;
            padding: 0;
            transition: color 0.3s ease;
        }

        .alert .close-btn:hover {
            color: #ffffff;
        }

        /* 添加代币单位标签样式 */
        .token-label, .unit-label {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            font-weight: 500;
            pointer-events: none;
        }

        .input-with-unit {
            position: relative;
        }

        .input-with-unit input {
            padding-right: 60px; /* 为单位标签留出空间 */
        }

        /* 调整带MAX按钮的输入框，避免与代币单位重叠 */
        .input-with-max .token-label {
            right: 70px; /* MAX按钮左侧 */
        }

        /* 优化抵押率显示 */
        .rewards-row .rewards-value {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* 当抵押率接近警戒线时的样式 */
        .rewards-value.warning {
            color: #ffaa00;
        }

        .rewards-value.danger {
            color: #ff4444;
        }

        /* 添加只读输入框样式 */
        .loan-amount {
            background: rgba(255, 255, 255, 0.03) !important;
            cursor: not-allowed;
            color: rgba(255, 255, 255, 0.8) !important;
        }

        .loan-amount:focus {
            border-color: rgba(255, 255, 255, 0.1) !important;
            box-shadow: none !important;
        }

        /* 添加固定提示框样式 */
        .loan-notice {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 0, 255, 0.1);
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .loan-notice i {
            font-size: 20px;
            color: #ff00ff;
            margin-top: 3px;
        }

        .notice-content {
            flex: 1;
        }

        .notice-content p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .notice-content p:last-child {
            margin-bottom: 0;
        }

        /* 添加赎回相关样式 */
        .repay-mode .loan-amount {
            background: rgba(255, 0, 255, 0.1) !important;
            border-color: rgba(255, 0, 255, 0.2) !important;
        }

        .repay-mode .unit-label {
            color: #ff00ff;
        }

        .repay-mode .defi-button {
            background: linear-gradient(45deg, #ff00ff, #ff66ff);
        }

        /* 添加还款模式下的金额显示样式 */
        .repay-mode-text {
            transition: all 0.3s ease;
        }

        .repay-mode .repay-mode-text::before {
            content: '需还款：';
            margin-right: 4px;
            color: rgba(255, 255, 255, 0.7);
        }

        /* 修改赎回按钮样式 */
        .action-buttons {
            margin-top: 20px;
        }

        .action-buttons .defi-button {
            width: 100%; /* 设置按钮宽度为100% */
            margin: 0; /* 移除外边距 */
        }

        /* 移除网格布局 */
        .defi-card:last-child .action-buttons {
            display: block; /* 改为块级显示 */
            gap: 0;
        }

        /* 修改所有相关样式 */
        .stat-item .value {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* 添加渐变文字通用样式 */
        .defi-card h2, .stat-item .value, .period-option .apy, .rewards-value.highlight, .alert i {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body>
    <!-- 复用LOGO -->
    <a href="#" class="site-logo">
        <img src="../images/your-vortex-logo.jpg" alt="WEB3 Logo">
    </a>

    <div class="background"></div>

    <!-- Defi 内容 -->
    <div class="defi-container">
        <!-- 质押模块 -->
        <div class="defi-card">
            <h2><i class="fas fa-lock"></i> 质押</h2>
            <div class="defi-stats">
                <div class="stat-item">
                    <div class="value">12.5%</div>
                    <div class="label">年化收益率</div>
                </div>
                <div class="stat-item">
                    <div class="value">1,234,567</div>
                    <div class="label">总质押量</div>
                </div>
            </div>
            
            <!-- 添加奖励信息显示 -->
            <div class="rewards-info">
                <div class="rewards-row">
                    <div class="rewards-label">
                        <i class="fas fa-coins"></i>
                        <span>当前质押</span>
                    </div>
                    <div class="rewards-value">1,000 PEAK</div>
                </div>
                <div class="rewards-row">
                    <div class="rewards-label">
                        <i class="fas fa-gift"></i>
                        <span>待领取奖励</span>
                    </div>
                    <div class="rewards-value highlight">125.5 PEAK</div>
                </div>
                <div class="rewards-row">
                    <div class="rewards-label">
                        <i class="fas fa-clock"></i>
                        <span>剩余解锁时间</span>
                    </div>
                    <div class="rewards-value">7天 12小时</div>
                </div>
            </div>

            <!-- 质押表单 -->
            <form class="defi-form">
                <div class="form-group">
                    <label>质押数量</label>
                    <div class="input-with-max">
                        <input type="number" placeholder="输入质押数量" min="0">
                        <button type="button" class="max-button">MAX</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>质押期限</label>
                    <div class="stake-period-options">
                        <button type="button" class="period-option" data-days="30" data-apy="12.5">
                            <span class="days">30天</span>
                            <span class="apy">12.5% APY</span>
                        </button>
                        <button type="button" class="period-option" data-days="90" data-apy="15.8">
                            <span class="days">90天</span>
                            <span class="apy">15.8% APY</span>
                        </button>
                        <button type="button" class="period-option" data-days="180" data-apy="20.5">
                            <span class="days">180天</span>
                            <span class="apy">20.5% APY</span>
                        </button>
                    </div>
                </div>
                <button type="submit" class="defi-button">确认质押</button>
            </form>

            <!-- 添加操作按钮组 -->
            <div class="action-buttons">
                <button class="defi-button secondary" id="unstakeBtn">
                    <i class="fas fa-unlock"></i>
                    解除质押
                </button>
                <button class="defi-button primary" id="claimBtn">
                    <i class="fas fa-hand-holding-usd"></i>
                    领取奖励
                </button>
            </div>
        </div>

        <!-- 抵押模块 -->
        <div class="defi-card">
            <h2><i class="fas fa-shield-alt"></i> 抵押</h2>
            
            <!-- 添加固定提示框 -->
            <div class="loan-notice">
                <i class="fas fa-info-circle"></i>
                <div class="notice-content">
                    <p>• 抵押率为95%，即每抵押100 PEAK可借95 USDT</p>
                    <p>• 抵押和赎回将收取5%手续费</p>
                    <p>• 借贷期限为30天，超期抵押物将转入质押池</p>
                    <p>• 手续费存入抵押池，每30天自动转入质押池</p>
                </div>
            </div>
            
            <div class="defi-stats">
                <div class="stat-item">
                    <div class="value">95%</div>
                    <div class="label">最大抵押率</div>
                </div>
                <div class="stat-item">
                    <div class="value">2,345,678</div>
                    <div class="label">总抵押量</div>
                </div>
            </div>

            <!-- 添加个人抵押信息 -->
            <div class="rewards-info">
                <div class="rewards-row">
                    <div class="rewards-label">
                        <i class="fas fa-coins"></i>
                        <span>已抵押数量</span>
                    </div>
                    <div class="rewards-value">5,000 PEAK</div>
                </div>
                <div class="rewards-row">
                    <div class="rewards-label">
                        <i class="fas fa-dollar-sign"></i>
                        <span>已借金额</span>
                    </div>
                    <div class="rewards-value">2,500 USDT</div>
                </div>
                <div class="rewards-row">
                    <div class="rewards-label">
                        <i class="fas fa-chart-line"></i>
                        <span>当前抵押率</span>
                    </div>
                    <div class="rewards-value">95%</div>
                </div>
            </div>

            <form class="defi-form">
                <div class="form-group">
                    <label>抵押数量</label>
                    <div class="input-with-max">
                        <input type="number" placeholder="输入抵押数量" min="0">
                        <button type="button" class="max-button">MAX</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>金额</label>
                    <div class="input-with-unit">
                        <input type="number" placeholder="0.00" readonly class="loan-amount">
                        <div class="unit-label repay-mode-text">USDT</div>
                    </div>
                </div>
                <button type="submit" class="defi-button">确认抵押</button>
            </form>

            <!-- 添加赎回按钮 -->
            <div class="action-buttons">
                <button class="defi-button secondary" id="repayBtn">
                    <i class="fas fa-undo"></i>
                    赎回抵押
                </button>
            </div>
        </div>
    </div>

    <!-- 复用导航栏 -->
    <nav>
        <div class="nav-links">
            <a href="模仿.html">
                <i class="fas fa-home"></i>
                <span>首页</span>
            </a>
            <a href="defi.html" class="active">
                <i class="fas fa-coins"></i>
                <span>Defi</span>
            </a>
            <a href="#about">
                <i class="fas fa-info-circle"></i>
                <span>关于</span>
            </a>
            <div class="language-dropdown">
                <a href="#" class="language-btn">
                    <i class="fas fa-globe"></i>
                    <span>语言</span>
                </a>
                <div class="language-options">
                    <a href="#" data-lang="zh" class="active">
                        <i class="fas fa-check"></i>
                        <span>简体中文</span>
                    </a>
                    <a href="#" data-lang="en">
                        <span>English</span>
                    </a>
                    <a href="#" data-lang="ko">
                        <span>한국어</span>
                    </a>
                    <a href="#" data-lang="ja">
                        <span>日本語</span>
                    </a>
                    <a href="#" data-lang="vi">
                        <span>Tiếng Việt</span>
                    </a>
                    <a href="#" data-lang="tr">
                        <span>Türkçe</span>
                    </a>
                </div>
            </div>
            <div class="contact-dropdown">
                <a href="#" class="contact-btn">
                    <i class="fas fa-envelope"></i>
                    <span>联系</span>
                </a>
                <div class="social-links">
                    <a href="https://x.com/peakcoineth" target="_blank">
                        <i class="fab fa-twitter"></i>
                        <span>Twitter</span>
                    </a>
                    <a href="https://t.me/EnjoyPlaytime" target="_blank">
                        <i class="fab fa-telegram"></i>
                        <span>Telegram</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 添加 JavaScript -->
    <script>
        // 语言切换按钮事件
        document.querySelector('.language-btn').addEventListener('click', function(e) {
            e.preventDefault();
            const dropdown = this.closest('.language-dropdown');
            dropdown.classList.toggle('active');

            // 点击其他地方关闭下拉菜单
            document.addEventListener('click', function closeDropdown(e) {
                if (!dropdown.contains(e.target)) {
                    dropdown.classList.remove('active');
                    document.removeEventListener('click', closeDropdown);
                }
            });
        });

        // 联系按钮事件
        document.querySelector('.contact-btn').addEventListener('click', function(e) {
            e.preventDefault();
            const dropdown = this.closest('.contact-dropdown');
            dropdown.classList.toggle('active');

            // 点击其他地方关闭下拉菜单
            document.addEventListener('click', function closeDropdown(e) {
                if (!dropdown.contains(e.target)) {
                    dropdown.classList.remove('active');
                    document.removeEventListener('click', closeDropdown);
                }
            });
        });

        // 语言切换功能
        document.querySelectorAll('.language-options a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                // 移除其他语言的active类
                document.querySelectorAll('.language-options a').forEach(el => {
                    el.classList.remove('active');
                });
                // 添加当前选中语言的active类
                this.classList.add('active');
                // 获取并切换语言
                const lang = this.getAttribute('data-lang');
                // 这里可以添加语言切换逻辑
            });
        });

        // 添加质押期限选择功能
        document.querySelectorAll('.period-option').forEach(button => {
            button.addEventListener('click', function() {
                // 移除其他按钮的active类
                document.querySelectorAll('.period-option').forEach(btn => {
                    btn.classList.remove('active');
                });
                // 添加当前按钮的active类
                this.classList.add('active');
                
                // 更新显示的APY
                const apy = this.getAttribute('data-apy');
                document.querySelector('.stat-item .value').textContent = apy + '%';
            });
        });

        // 修改MAX按钮功能，处理所有MAX按钮
        document.querySelectorAll('.max-button').forEach(button => {
            button.addEventListener('click', function() {
                const input = this.previousElementSibling;
                // 这里可以设置最大可用数量，暂时设置为10000
                input.value = '10000';
            });
        });

        // 添加显示提示框的函数
        function showAlert(message, type = 'error', duration = 3000) {
            const alertContainer = document.querySelector('.alert-container');
            const alert = document.createElement('div');
            alert.className = 'alert';
            
            // 根据类型设置不同的图标
            const icon = type === 'error' ? 'fa-exclamation-circle' : 'fa-check-circle';
            
            alert.innerHTML = `
                <i class="fas ${icon}"></i>
                <span class="message">${message}</span>
                <button class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            alertContainer.appendChild(alert);
            
            // 添加关闭按钮事件
            alert.querySelector('.close-btn').addEventListener('click', () => {
                alert.style.transform = 'translateX(120%)';
                setTimeout(() => alert.remove(), 300);
            });
            
            // 显示动画
            setTimeout(() => alert.classList.add('show'), 10);
            
            // 自定义时间后自动关闭
            if (duration > 0) {
                setTimeout(() => {
                    if (alert.parentElement) {
                        alert.style.transform = 'translateX(120%)';
                        setTimeout(() => alert.remove(), 300);
                    }
                }, duration);
            }
        }

        // 修改表单验证中的提示方式
        document.querySelector('.defi-card:first-child .defi-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const stakeAmount = this.querySelector('input[type="number"]').value;
            const selectedPeriod = this.querySelector('.period-option.active');
            
            if (!stakeAmount || stakeAmount <= 0) {
                showAlert('请输入质押数量');
                return;
            }
            
            if (!selectedPeriod) {
                showAlert('请选择质押期限');
                return;
            }
            
            const stakeDays = selectedPeriod.getAttribute('data-days');
            const stakeAPY = selectedPeriod.getAttribute('data-apy');
            
            // 显示成功提示
            showAlert(`质押成功！\n质押数量: ${stakeAmount} PEAK\n质押期限: ${stakeDays}天\n年化收益率: ${stakeAPY}%`, 'success');
            
            // 重置表单
            this.reset();
            this.querySelectorAll('.period-option').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.stat-item .value').textContent = '12.5%';
        });

        // 优化质押期限选择按钮，添加键盘支持
        document.querySelectorAll('.period-option').forEach(button => {
            button.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });

        // 添加抵押借贷相关功能
        const PEAK_PRICE = 2; // 假设AT当前价格为2 USDT
        const MAX_LTV = 0.95; // 最大抵押率改为95%
        const LOAN_PERIOD = 30; // 借贷期限30天

        // 修改抵押数量输入监听，自动计算并显示借贷金额
        document.querySelector('.defi-card:last-child input[placeholder="输入抵押数量"]').addEventListener('input', function() {
            const collateralAmount = parseFloat(this.value) || 0;
            // 计算最大可借金额（95%）
            const maxLoanAmount = collateralAmount * PEAK_PRICE * MAX_LTV;
            
            // 直接设置借贷金额
            const loanInput = document.querySelector('.loan-amount');
            loanInput.value = maxLoanAmount.toFixed(2);
        });

        // 添加手续费相关常量和功能
        const FEE_RATE = 0.05; // 5%的手续费率

        // 修改抵押表单验证，移除成功提示
        document.querySelector('.defi-card:last-child .defi-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const collateralAmount = parseFloat(this.querySelector('input[placeholder="输入抵押数量"]').value) || 0;
            const loanAmount = parseFloat(this.querySelector('.loan-amount').value) || 0;
            
            // 验证抵押数量
            if (collateralAmount <= 0) {
                showAlert('请输入抵押数量');
                return;
            }
            
            // 计算手续费
            const fee = collateralAmount * FEE_RATE;
            const actualCollateral = collateralAmount - fee;
            
            // 计算当前抵押率
            const currentLTV = (loanAmount / (actualCollateral * PEAK_PRICE)).toFixed(2);
            
            // 更新显示的抵押信息
            const rewardsInfo = this.closest('.defi-card').querySelector('.rewards-info');
            rewardsInfo.querySelector('.rewards-value:nth-child(1)').textContent = `${actualCollateral.toFixed(2)} AT`;
            rewardsInfo.querySelector('.rewards-value:nth-child(2)').textContent = `${loanAmount} USDT`;
            
            // 更新抵押率显示
            const ltvElement = rewardsInfo.querySelector('.rewards-value:last-child');
            ltvElement.textContent = `${(currentLTV * 100).toFixed(1)}%`;
            ltvElement.className = 'rewards-value';
            if (currentLTV >= 0.7) {
                ltvElement.classList.add('danger');
            } else if (currentLTV >= 0.6) {
                ltvElement.classList.add('warning');
            }
            
            // 记录借贷时间
            recordLoanDate();
            
            // 重置表单
            this.reset();
            document.querySelector('.loan-amount').value = '0.00';
        });

        // 添加倒计时显示功能
        function updateLoanTimer() {
            const loanDate = localStorage.getItem('loanDate');
            if (loanDate) {
                const endDate = new Date(parseInt(loanDate) + LOAN_PERIOD * 24 * 60 * 60 * 1000);
                const now = new Date();
                const timeLeft = endDate - now;
                
                if (timeLeft > 0) {
                    const days = Math.floor(timeLeft / (24 * 60 * 60 * 1000));
                    const hours = Math.floor((timeLeft % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
                    document.querySelector('.defi-card:last-child .rewards-info .rewards-row:last-child .rewards-value')
                        .textContent = `${days}天 ${hours}小时`;
                } else {
                    showAlert('借贷期限已到，抵押物已转入质押池', 'error');
                    localStorage.removeItem('loanDate');
                }
            }
        }

        // 当成功抵押时记录时间
        function recordLoanDate() {
            localStorage.setItem('loanDate', Date.now().toString());
            updateLoanTimer();
        }

        // 定期更新倒计时
        setInterval(updateLoanTimer, 60000); // 每分钟更新一次

        // 添加赎回功能
        function redeemCollateral(amount) {
            // 计算赎回手续费
            const fee = amount * FEE_RATE;
            const actualRedeemAmount = amount - fee;
            
            showAlert(
                `赎回成功！\n` +
                `赎回数量: ${amount} PEAK\n` +
                `手续费: ${fee.toFixed(2)} PEAK (5%)\n` +
                `实际赎回: ${actualRedeemAmount.toFixed(2)} PEAK\n` +
                `注：手续费将存入抵押池，每30天自动转入质押池`,
                'success'
            );
            
            // 这里可以添加更新UI的逻辑
        }

        // 添加抵押池结算倒计时显示
        function updatePoolSettlementTimer() {
            const lastSettlement = localStorage.getItem('lastPoolSettlement') || Date.now().toString();
            const nextSettlement = parseInt(lastSettlement) + (30 * 24 * 60 * 60 * 1000);
            const now = Date.now();
            const timeLeft = nextSettlement - now;
            
            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (24 * 60 * 60 * 1000));
                const hours = Math.floor((timeLeft % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
                // 这里可以添加显示倒计时的UI元素
            } else {
                // 执行抵押池结算
                settleCollateralPool();
                // 更新结算时间
                localStorage.setItem('lastPoolSettlement', Date.now().toString());
            }
        }

        // 抵押池结算函数
        function settleCollateralPool() {
            showAlert('抵押池结算完成，手续费已转入质押池', 'success');
            // 这里可以添加具体的结算逻辑
        }

        // 定期检查抵押池结算时间
        setInterval(updatePoolSettlementTimer, 60000); // 每分钟检查一次

        // 添加赎回和还款相关常量和功能
        const REDEMPTION_FEE_RATE = 0.05; // 5%的赎回手续费率
        let loanHistory = JSON.parse(localStorage.getItem('loanHistory') || '[]');

        // 记录借贷信息
        function recordLoan(collateralAmount, loanAmount, tokenPrice) {
            const loan = {
                collateralAmount,
                loanAmount,
                tokenPrice,
                timestamp: Date.now()
            };
            loanHistory.push(loan);
            localStorage.setItem('loanHistory', JSON.stringify(loanHistory));
        }

        // 修改抵押表单验证，添加价格记录
        document.querySelector('.defi-card:last-child .defi-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const collateralAmount = parseFloat(this.querySelector('input[placeholder="输入抵押数量"]').value) || 0;
            const loanAmount = parseFloat(this.querySelector('.loan-amount').value) || 0;
            
            // ... 其他验证代码保持不变 ...
            
            // 记录借贷信息
            recordLoan(collateralAmount, loanAmount, PEAK_PRICE);
            
            // ... 其他代码保持不变 ...
        });

        // 添加还款和赎回功能
        function redeemAndRepay(amount) {
            const loan = loanHistory[loanHistory.length - 1]; // 获取最近的借贷记录
            if (!loan) {
                showAlert('没有找到借贷记录');
                return;
            }

            // 计算需要还款的USDT金额
            const repayAmount = loan.loanAmount;
            
            // 计算赎回手续费
            const fee = amount * REDEMPTION_FEE_RATE;
            const actualRedeemAmount = amount - fee;
            
            // 按照借贷时的代币价格计算
            const valueAtLoanTime = amount * loan.tokenPrice;
            
            const alertContent = document.createElement('div');
            alertContent.innerHTML = `
                <div class="repay-confirm">
                    <p>赎回数量: ${amount} PEAK</p>
                    <p>需还款金额: ${repayAmount} USDT</p>
                    <p>手续费: ${fee.toFixed(2)} PEAK (5%)</p>
                    <p>实际赎回: ${actualRedeemAmount.toFixed(2)} PEAK</p>
                    <p>按借贷时价格计算: 1 PEAK = ${loan.tokenPrice} USDT</p>
                    <p>总价值: ${valueAtLoanTime.toFixed(2)} USDT</p>
                    <div class="confirm-buttons">
                        <button class="confirm-btn">确认赎回</button>
                        <button class="cancel-btn">取消</button>
                    </div>
                </div>
            `;
            
            showCustomAlert(alertContent, 'confirm');
            
            // 添加确认按钮事件
            alertContent.querySelector('.confirm-btn').addEventListener('click', () => {
                confirmRepayAndRedeem(loan);
                document.querySelector('.alert').remove();
                // 重置表单和按钮状态
                resetRepayMode();
            });
            
            // 添加取消按钮事件
            alertContent.querySelector('.cancel-btn').addEventListener('click', () => {
                document.querySelector('.alert').remove();
                resetRepayMode();
            });
        }

        // 添加还款确认按钮的事件处理
        function confirmRepayAndRedeem(loan) {
            // 执行还款和赎回操作
            loanHistory.pop(); // 移除已还清的借贷记录
            localStorage.setItem('loanHistory', JSON.stringify(loanHistory));
            
            showAlert(
                `还款和赎回成功！\n` +
                `已还款: ${loan.loanAmount} USDT\n` +
                `已赎回: ${loan.collateralAmount} PEAK\n` +
                `手续费已存入抵押池`,
                'success'
            );
            
            // 更新UI显示
            updateLoanDisplay();
        }

        // 更新借贷信息显示
        function updateLoanDisplay() {
            const rewardsInfo = document.querySelector('.defi-card:last-child .rewards-info');
            if (loanHistory.length > 0) {
                const currentLoan = loanHistory[loanHistory.length - 1];
                rewardsInfo.querySelector('.rewards-value:nth-child(1)').textContent = `${currentLoan.collateralAmount} PEAK`;
                rewardsInfo.querySelector('.rewards-value:nth-child(2)').textContent = `${currentLoan.loanAmount} USDT`;
            } else {
                rewardsInfo.querySelector('.rewards-value:nth-child(1)').textContent = '0 PEAK';
                rewardsInfo.querySelector('.rewards-value:nth-child(2)').textContent = '0 USDT';
                rewardsInfo.querySelector('.rewards-value:last-child').textContent = '0%';
            }
        }

        // 初始化时更新显示
        updateLoanDisplay();

        // 添加赎回功能相关代码
        const repayBtn = document.querySelector('#repayBtn');
        const defiForm = document.querySelector('.defi-card:last-child .defi-form');
        let isRepayMode = false;

        repayBtn.addEventListener('click', function() {
            const loan = loanHistory[loanHistory.length - 1];
            if (!loan) {
                showAlert('没有可赎回的抵押物');
                return;
            }

            isRepayMode = !isRepayMode;
            const form = this.closest('.defi-card').querySelector('.defi-form');
            
            if (isRepayMode) {
                // 切换到赎回模式
                form.classList.add('repay-mode');
                form.querySelector('button[type="submit"]').textContent = '确认赎回';
                
                // 显示需要还款的金额
                const loanInput = form.querySelector('.loan-amount');
                loanInput.value = loan.loanAmount;
                loanInput.placeholder = '需还款金额';
                
                // 设置抵押数量为已抵押数量
                const collateralInput = form.querySelector('input[placeholder="输入抵押数量"]');
                collateralInput.value = loan.collateralAmount;
                collateralInput.readOnly = true;
                
                this.textContent = '取消赎回';
                this.style.background = '#ff4444';
            } else {
                // 切换回抵押模式
                form.classList.remove('repay-mode');
                form.querySelector('button[type="submit"]').textContent = '确认抵押';
                
                // 重置输入框
                form.reset();
                const collateralInput = form.querySelector('input[placeholder="输入抵押数量"]');
                collateralInput.readOnly = false;
                const loanInput = form.querySelector('.loan-amount');
                loanInput.value = '0.00';
                loanInput.placeholder = '0.00';
                
                this.innerHTML = '<i class="fas fa-undo"></i> 赎回抵押';
                this.style.background = '';
            }
        });

        // 修改表单提交处理
        defiForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (isRepayMode) {
                // 处理赎回逻辑
                const loan = loanHistory[loanHistory.length - 1];
                if (!loan) return;
                
                redeemAndRepay(loan.collateralAmount);
            } else {
                // 原有的抵押逻辑
                const collateralAmount = parseFloat(this.querySelector('input[placeholder="输入抵押数量"]').value) || 0;
                // ... 其他抵押代码 ...
            }
        });

        // 修改redeemAndRepay函数，添加确认按钮
        function redeemAndRepay(amount) {
            const loan = loanHistory[loanHistory.length - 1];
            if (!loan) {
                showAlert('没有找到借贷记录');
                return;
            }

            const repayAmount = loan.loanAmount;
            const fee = amount * REDEMPTION_FEE_RATE;
            const actualRedeemAmount = amount - fee;
            const valueAtLoanTime = amount * loan.tokenPrice;
            
            const alertContent = document.createElement('div');
            alertContent.innerHTML = `
                <div class="repay-confirm">
                    <p>赎回数量: ${amount} PEAK</p>
                    <p>需还款金额: ${repayAmount} USDT</p>
                    <p>手续费: ${fee.toFixed(2)} PEAK (5%)</p>
                    <p>实际赎回: ${actualRedeemAmount.toFixed(2)} PEAK</p>
                    <p>按借贷时价格计算: 1 PEAK = ${loan.tokenPrice} USDT</p>
                    <p>总价值: ${valueAtLoanTime.toFixed(2)} USDT</p>
                    <div class="confirm-buttons">
                        <button class="confirm-btn">确认赎回</button>
                        <button class="cancel-btn">取消</button>
                    </div>
                </div>
            `;
            
            showCustomAlert(alertContent, 'confirm');
            
            // 添加确认按钮事件
            alertContent.querySelector('.confirm-btn').addEventListener('click', () => {
                confirmRepayAndRedeem(loan);
                document.querySelector('.alert').remove();
                // 重置表单和按钮状态
                resetRepayMode();
            });
            
            // 添加取消按钮事件
            alertContent.querySelector('.cancel-btn').addEventListener('click', () => {
                document.querySelector('.alert').remove();
                resetRepayMode();
            });
        }

        // 添加重置赎回模式的函数
        function resetRepayMode() {
            isRepayMode = false;
            const form = document.querySelector('.defi-card:last-child .defi-form');
            form.classList.remove('repay-mode');
            form.querySelector('button[type="submit"]').textContent = '确认抵押';
            form.reset();
            
            const collateralInput = form.querySelector('input[placeholder="输入抵押数量"]');
            collateralInput.readOnly = false;
            form.querySelector('.loan-amount').value = '0.00';
            
            const repayBtn = document.querySelector('#repayBtn');
            repayBtn.innerHTML = '<i class="fas fa-undo"></i> 赎回抵押';
            repayBtn.style.background = '';
        }

        // 添加全局变量来跟踪总量
        let totalStakeAmount = 0;
        let totalCollateralAmount = 0;

        // 更新总质押量显示函数
        function updateTotalStakeDisplay() {
            document.querySelector('.defi-card:first-child .stat-item:nth-child(2) .value').textContent = 
                totalStakeAmount.toLocaleString();
        }

        // 更新总抵押量显示函数
        function updateTotalCollateralDisplay() {
            document.querySelector('.defi-card:last-child .stat-item:nth-child(2) .value').textContent = 
                totalCollateralAmount.toLocaleString();
        }

        // 修改质押表单提交处理
        document.querySelector('.defi-card:first-child .defi-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const stakeAmount = parseFloat(this.querySelector('input[type="number"]').value) || 0;
            // ... 其他验证代码 ...
            
            // 更新总质押量
            totalStakeAmount += stakeAmount;
            updateTotalStakeDisplay();
            
            // ... 其他代码 ...
        });

        // 修改抵押表单提交处理
        document.querySelector('.defi-card:last-child .defi-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const collateralAmount = parseFloat(this.querySelector('input[placeholder="输入抵押数量"]').value) || 0;
            // ... 其他验证代码 ...
            
            // 更新总抵押量
            totalCollateralAmount += collateralAmount;
            updateTotalCollateralDisplay();
            
            // ... 其他代码 ...
        });

        // 修改解除质押处理函数
        document.querySelector('#unstakeBtn').addEventListener('click', function() {
            const currentStake = parseFloat(document.querySelector('.defi-card:first-child .rewards-value').textContent) || 0;
            if (currentStake > 0) {
                totalStakeAmount -= currentStake;
                updateTotalStakeDisplay();
                // ... 其他解除质押逻辑 ...
            }
        });

        // 初始化显示
        updateTotalStakeDisplay();
        updateTotalCollateralDisplay();
    </script>

    <!-- 在body标签内添加提示框容器 -->
    <div class="alert-container"></div>
</body>
</html> 